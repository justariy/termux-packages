--- ../settings.orig	2018-09-14 23:28:49.080358301 +0200
+++ ./etc/config.sh/settings	2018-09-14 23:52:27.589725376 +0200
@@ -32,108 +32,67 @@
 # Set environment variables according to system type
 : ${WM_OSTYPE:=POSIX}; export WM_OSTYPE  # Default is POSIX
 
-export WM_ARCH=$(uname -s)
-case "$WM_ARCH" in
-Linux)
-    WM_ARCH=linux
-
-    # Compiler specifics
-    case $(uname -m) in
-    i686)
-        export WM_ARCH_OPTION=32
-        export WM_CC='gcc'
-        export WM_CXX='g++'
-        export WM_CFLAGS='-fPIC'
-        export WM_CXXFLAGS='-fPIC -std=c++11'
-        export WM_LDFLAGS=
-        ;;
-
-    x86_64)
-        : ${WM_ARCH_OPTION:=64}; export WM_ARCH_OPTION  # Default to 64-bit
-        case "$WM_ARCH_OPTION" in
-        32)
-            export WM_COMPILER_ARCH=64
-            export WM_CC='gcc'
-            export WM_CXX='g++'
-            export WM_CFLAGS='-m32 -fPIC'
-            export WM_CXXFLAGS='-m32 -fPIC -std=c++11'
-            export WM_LDFLAGS='-m32'
-            ;;
-        64)
-            WM_ARCH=linux64
-            export WM_COMPILER_LIB_ARCH=64
-            export WM_CC='gcc'
-            export WM_CXX='g++'
-            export WM_CFLAGS='-m64 -fPIC'
-            export WM_CXXFLAGS='-m64 -fPIC -std=c++11'
-            export WM_LDFLAGS='-m64'
-            ;;
-        *)
-            echo "Unknown WM_ARCH_OPTION '$WM_ARCH_OPTION', should be 32|64" 1>&2
-            ;;
-        esac
-        ;;
-
-    ia64)
-        WM_ARCH=linuxIA64
-        export WM_COMPILER=I64
-        ;;
+export WM_ARCH=$(echo $CXX | awk -F"-" '{print $1}')
 
-    armv7l)
-        WM_ARCH=linuxARM7
+case "$WM_ARCH" in
+i686)
+	WM_ARCH=linux
         export WM_ARCH_OPTION=32
-        export WM_COMPILER_LIB_ARCH=32
-        export WM_CC='gcc'
-        export WM_CXX='g++'
+        export WM_CC='i686-linux-android-gcc'
+        export WM_CXX='i686-linux-android-g++'
         export WM_CFLAGS='-fPIC'
         export WM_CXXFLAGS='-fPIC -std=c++11'
         export WM_LDFLAGS=
         ;;
 
-    ppc64)
-        WM_ARCH=linuxPPC64
-        export WM_COMPILER_LIB_ARCH=64
-        export WM_CC='gcc'
-        export WM_CXX='g++'
-        export WM_CFLAGS='-m64 -fPIC'
-        export WM_CXXFLAGS='-m64 -fPIC -std=c++11'
-        export WM_LDFLAGS='-m64'
+x86_64)
+    : ${WM_ARCH_OPTION:=64}; export WM_ARCH_OPTION  # Default to 64-bit
+    case "$WM_ARCH_OPTION" in
+    32)
+        export WM_COMPILER_ARCH=64
+        export WM_CC='x86_64-linux-android-gcc'
+        export WM_CXX='x86_64-linux-android-g++'
+        export WM_CFLAGS='-m32 -fPIC'
+        export WM_CXXFLAGS='-m32 -fPIC -std=c++11'
+        export WM_LDFLAGS='-m32'
         ;;
-
-    ppc64le)
-        WM_ARCH=linuxPPC64le
+    64)
+        WM_ARCH=linux64
         export WM_COMPILER_LIB_ARCH=64
-        export WM_CC='gcc'
-        export WM_CXX='g++'
+        export WM_CC='x86_64-linux-android-gc'
+        export WM_CXX='x86_64-linux-android-g++'
         export WM_CFLAGS='-m64 -fPIC'
         export WM_CXXFLAGS='-m64 -fPIC -std=c++11'
         export WM_LDFLAGS='-m64'
         ;;
-
     *)
-        echo Unknown processor type $(uname -m) for Linux 1>&2
+        echo "Unknown WM_ARCH_OPTION '$WM_ARCH_OPTION', should be 32|64" 1>&2
         ;;
     esac
     ;;
 
-SunOS)
-    WM_ARCH=SunOS64
-    WM_MPLIB=FJMPI
-    export WM_COMPILER_LIB_ARCH=64
-    export WM_CC='gcc'
-    export WM_CXX='g++'
-    export WM_CFLAGS='-mabi=64 -fPIC'
-    export WM_CXXFLAGS='-mabi=64 -fPIC -std=c++11'
-    export WM_LDFLAGS='-mabi=64 -G0'
+armv7l)
+    WM_ARCH=linuxARM7
+    export WM_ARCH_OPTION=32
+    export WM_COMPILER_LIB_ARCH=32
+    export WM_CC='arm-linux-android-gcc'
+    export WM_CXX='arm-linux-android-g++'
+    export WM_CFLAGS='-fPIC'
+    export WM_CXXFLAGS='-fPIC -std=c++11'
+    export WM_LDFLAGS=
     ;;
 
-*)  # An unsupported operating system
-    /bin/cat << UNSUPPORTED_OS 1>&2
-===============================================================================
-Your '$WM_ARCH' operating system is unsupported by this OpenFOAM release.
-For further assistance, please contact www.OpenFOAM.com
-===============================================================================
-UNSUPPORTED_OS
+aarch64)
+    WM_ARCH=linuxAArch64
+    export WM_COMPILER_LIB_ARCH=64
+    export WM_CC='aarch64-linux-android-gcc'
+    export WM_CXX='aarch64-linux-android-g++'
+    export WM_CFLAGS='-fPIC'
+    export WM_CXXFLAGS='-fPIC -std=c++11'
+    export WM_LDFLAGS=
+    ;;
+*)  # An unsupported architecture
+    echo "Unknown architecture '$WM_ARCH'" 1>&2
     ;;
 esac
 
